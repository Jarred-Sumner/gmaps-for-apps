"use strict";!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(["jquery","googlemaps!"],b):a.GMaps=b()}(this,function(){if("object"!=typeof window.google||!window.google.maps)throw"Google Maps API is required. Please register the following JavaScript library http://maps.google.com/maps/api/js?sensor=true.";var a=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},b=function(a,b){var c,d,e=Array.prototype.slice.call(arguments,2),f=[],g=a.length;if(Array.prototype.map&&a.map===Array.prototype.map)f=Array.prototype.map.call(a,function(a){return d=e.slice(0),d.splice(0,0,a),b.apply(this,d)});else for(c=0;g>c;c++)d=e,d.splice(0,0,a[c]),f.push(b.apply(this,d));return f},c=function(a){var b,c,d=[];for(b=0,c=a.length;c>b;b++)d=d.concat(a[b]);return d},d=function(a,b){var c=a[0],d=a[1];return b&&(c=a[1],d=a[0]),new google.maps.LatLng(c,d)},e=function(a,b){for(var c=0,f=a.length;f>c;c++)a[c]instanceof google.maps.LatLng||(a[c].length>0&&"object"==typeof a[c][0]?a[c]=e(a[c],b):a[c]=d(a[c],b));return a},f=function(a,b){var c,d=a.replace(".","");return c="jQuery"in this&&b?$("."+d,b)[0]:document.getElementsByClassName(d)[0]},g=function(a,b){var c;return a=a.replace("#",""),c="jQuery"in window&&b?$("#"+a,b)[0]:document.getElementById(a)},h=function(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return[b,c]},i=function(a,b){return function(c){return a(c,b||this)}},j=function(){var b=document,c=function(d){function e(a,b,c){a[c]=function(){return b[c].apply(b,arguments)}}if(!this)return new c(d);d.zoom=d.zoom||15,d.mapType=d.mapType||"roadmap";var i,j=function(a,b){return void 0===a?b:a},k=this,l=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"],m=["mousemove","mouseout","mouseover"],n=["el","lat","lng","mapType","width","height","markerClusterer","enableNewStyle"],o=d.el||d.div,p=d.markerClusterer,q=google.maps.MapTypeId[d.mapType.toUpperCase()],r=new google.maps.LatLng(d.lat,d.lng),s=j(d.zoomControl,!0),t=d.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},u=t.style||"DEFAULT",v=t.position||"TOP_LEFT",w=j(d.panControl,!0),x=j(d.mapTypeControl,!0),y=j(d.scaleControl,!0),z=j(d.streetViewControl,!0),A=j(A,!0),B={},C={zoom:this.zoom,center:r,mapTypeId:q},D={panControl:w,zoomControl:s,zoomControlOptions:{style:google.maps.ZoomControlStyle[u],position:google.maps.ControlPosition[v]},mapTypeControl:x,scaleControl:y,streetViewControl:z,overviewMapControl:A};if("string"==typeof d.el||"string"==typeof d.div?o.indexOf("#")>-1?this.el=g(o,d.context):this.el=f.apply(this,[o,d.context]):this.el=o,"undefined"==typeof this.el||null===this.el)throw"No element defined.";for(window.context_menu=window.context_menu||{},window.context_menu[k.el.id]={},this.controls=[],this.overlays=[],this.polygons=[],this.polylines=[],this.circles=[],this.rectangles=[],this.layers=[],this.singleLayers={},this.markers=[],this.routes=[],this.infoWindow=null,this.overlay_el=null,this.zoom=d.zoom,this.registered_events={},this.el.style.width=d.width||this.el.scrollWidth||this.el.offsetWidth,this.el.style.height=d.height||this.el.scrollHeight||this.el.offsetHeight,google.maps.visualRefresh=d.enableNewStyle,i=0;i<n.length;i++)delete d[n[i]];for(d.disableDefaultUI!==!0&&(C=a(C,D)),B=a(C,d),i=0;i<l.length;i++)delete B[l[i]];for(i=0;i<m.length;i++)delete B[m[i]];this.map=new google.maps.Map(this.el,B),p&&(this.markerClusterer=p.apply(this,[this.map]));var E=function(a,b){var c="",d=window.context_menu[k.el.id][a];for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];c+='<li><a id="'+a+"_"+e+'" href="#">'+f.title+"</a></li>"}if(g("gmaps_context_menu")){var i=g("gmaps_context_menu");i.innerHTML=c;var j=i.getElementsByTagName("a"),l=j.length,m=function(c){c.preventDefault(),d[this.id.replace(a+"_","")].action.apply(k,[b]),k.hideContextMenu()};for(e=0;l>e;e++){var n=j[e];google.maps.event.clearListeners(n,"click"),google.maps.event.addDomListenerOnce(n,"click",m,!1)}var o=h.apply(this,[k.el]),p=o[0]+b.pixel.x-15,q=o[1]+b.pixel.y-15;i.style.left=p+"px",i.style.top=q+"px",i.style.display="block"}};this.buildContextMenu=function(a,b){if("marker"===a){b.pixel={};var c=new google.maps.OverlayView;c.setMap(k.map),c.draw=function(){var d=c.getProjection(),e=b.marker.getPosition();b.pixel=d.fromLatLngToContainerPixel(e),E(a,b)}}else E(a,b)},this.setContextMenu=function(a){window.context_menu[k.el.id][a.control]={};var c,d=b.createElement("ul");for(c in a.options)if(a.options.hasOwnProperty(c)){var e=a.options[c];window.context_menu[k.el.id][a.control][e.name]={title:e.title,action:e.action}}d.id="gmaps_context_menu",d.style.display="none",d.style.position="absolute",d.style.minWidth="100px",d.style.background="white",d.style.listStyle="none",d.style.padding="8px",d.style.boxShadow="2px 2px 6px #ccc",b.body.appendChild(d);var f=g("gmaps_context_menu");google.maps.event.addDomListener(f,"mouseout",function(a){a.relatedTarget&&this.contains(a.relatedTarget)||window.setTimeout(function(){f.style.display="none"},400)},!1)},this.hideContextMenu=function(){var a=g("gmaps_context_menu");a&&(a.style.display="none")};var F=function(a,b){google.maps.event.addListener(a,b,function(a){"undefined"==typeof a&&(a=this),d[b].apply(this,[a]),k.hideContextMenu()})};google.maps.event.addListener(this.map,"zoom_changed",this.hideContextMenu);var G,H;for(G=0;G<l.length;G++)H=l[G],H in d&&F(this.map,H);for(G=0;G<m.length;G++)H=m[G],H in d&&F(this.map,H);google.maps.event.addListener(this.map,"rightclick",function(a){d.rightclick&&d.rightclick.apply(this,[a]),"undefined"!=typeof window.context_menu[k.el.id].map&&k.buildContextMenu("map",a)}),this.refresh=function(){google.maps.event.trigger(this.map,"resize")},this.fitZoom=function(){var a,b=[],c=this.markers.length;for(a=0;c>a;a++)"boolean"==typeof this.markers[a].visible&&this.markers[a].visible&&b.push(this.markers[a].getPosition());this.fitLatLngBounds(b)},this.fitLatLngBounds=function(a){var b,c=a.length,d=new google.maps.LatLngBounds;for(b=0;c>b;b++)d.extend(a[b]);this.map.fitBounds(d)},this.setCenter=function(a,b,c){this.map.panTo(new google.maps.LatLng(a,b)),c&&c()},this.getElement=function(){return this.el},this.zoomIn=function(a){a=a||1,this.zoom=this.map.getZoom()+a,this.map.setZoom(this.zoom)},this.zoomOut=function(a){a=a||1,this.zoom=this.map.getZoom()-a,this.map.setZoom(this.zoom)};var I,J=[];for(I in this.map)"function"!=typeof this.map[I]||this[I]||J.push(I);for(i=0;i<J.length;i++)e(this,this.map,J[i])};return c}();return j.prototype.createControl=function(a){var b=document.createElement("div");b.style.cursor="pointer",a.disableDefaultStyles!==!0&&(b.style.fontFamily="Roboto, Arial, sans-serif",b.style.fontSize="11px",b.style.boxShadow="rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px");for(var c in a.style)a.style.hasOwnProperty(c)&&(b.style[c]=a.style[c]);a.id&&(b.id=a.id),a.title&&(b.title=a.title),a.classes&&(b.className=a.classes),a.content&&("string"==typeof a.content?b.innerHTML=a.content:a.content instanceof HTMLElement&&b.appendChild(a.content)),a.position&&(b.position=google.maps.ControlPosition[a.position.toUpperCase()]);for(var d in a.events)a.events.hasOwnProperty(d)&&google.maps.event.addDomListener(b,d,i(a.events[d]));return b.index=1,b},j.prototype.addControl=function(a){var b=this.createControl(a);return this.controls.push(b),this.map.controls[b.position].push(b),b},j.prototype.removeControl=function(a){var b,c,d,e=null;for(c=0,d=this.controls.length;d>c;c++)if(this.controls[c]===a){e=this.controls[c].position,this.controls.splice(c,1);break}if(e)for(c=0,d=this.map.controls.length;d>c;c++)if(b=this.map.controls[a.position],b.getAt(c)===a){b.removeAt(c);break}return a},j.prototype.drawCircle=function(b){b=a({map:this.map,center:new google.maps.LatLng(b.lat,b.lng)},b);for(var c,d=new google.maps.Circle(b),e=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],f=0,g=e.length;g>f;f++)c=e[f],b.hasOwnProperty(c)&&google.maps.event.addListener(d,c,i(b[c],d));return this.circles.push(d),d},j.prototype.removeCircle=function(a){for(var b=0,c=this.circles.length;c>b;b++)if(this.circles[b]===a)return this.circles[b].setMap(null),this.circles.splice(b,1),j.fire("circle_removed",a,this),!0;return!1},j.prototype.removeCircles=function(){for(var a=0,b=this.circles.length;b>a;a++)this.circles[a].setMap(null);this.circles.length=0},j.prototype.drawPolygon=function(d){var f=!1;d.hasOwnProperty("useGeoJSON")&&(f=d.useGeoJSON),delete d.useGeoJSON,d=a({map:this.map},d),f===!1&&(d.paths=[d.paths.slice(0)]),d.paths.length>0&&d.paths[0]&&d.paths[0].length>0&&(d.paths=c(b(d.paths,e,f)));for(var g,h=new google.maps.Polygon(d),k=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],l=0,m=k.length;m>l;l++)g=k[l],d.hasOwnProperty(g)&&google.maps.event.addListener(h,g,i(d[g],h));return this.polygons.push(h),j.fire("polygon_added",h,this),h},j.prototype.removePolygon=function(a){for(var b=0,c=this.polygons.length;c>b;b++)if(this.polygons[b]===a)return this.polygons[b].setMap(null),this.polygons.splice(b,1),j.fire("polygon_removed",a,this),!0;return!1},j.prototype.removePolygons=function(){for(var a=0,b=this.polygons.length;b>a;a++)this.polygons[a].setMap(null);this.polygons.length=0},j.prototype.drawRectangle=function(b){b=a({map:this.map},b);var c=new google.maps.LatLngBounds(new google.maps.LatLng(b.bounds[0][0],b.bounds[0][1]),new google.maps.LatLng(b.bounds[1][0],b.bounds[1][1]));b.bounds=c;for(var d,e=new google.maps.Rectangle(b),f=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],g=0,h=f.length;h>g;g++)d=f[g],b.hasOwnProperty(d)&&google.maps.event.addListener(e,d,i(b[d],e));return this.rectangles.push(e),j.fire("rectangle_added",e,this),e},j.prototype.removeRectangle=function(a){for(var b=0,c=this.rectangles.length;c>b;b++)if(this.rectangles[b]===a)return this.rectangles[b].setMap(null),this.rectangles.splice(b,1),j.fire("rectangle_removed",a,this),!0;return!1},j.prototype.removeRectangles=function(){for(var a=0,b=this.rectangles.length;b>a;a++)this.rectangles[a].setMap(null);this.rectangles.length=0},j.prototype.drawPolyline=function(a){var b,c,d,e,f=[],g=a.path;if(g.length)if("undefined"==typeof g[0][0])f=g;else for(b=0,c=g.length;c>b;b++)d=g[b],f.push(new google.maps.LatLng(d[0],d[1]));var h={map:this.map,path:f,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight,geodesic:a.geodesic,clickable:!0,editable:!1,visible:!0};a.hasOwnProperty("clickable")&&(h.clickable=a.clickable),a.hasOwnProperty("editable")&&(h.editable=a.editable),a.hasOwnProperty("icons")&&(h.icons=a.icons),a.hasOwnProperty("zIndex")&&(h.zIndex=a.zIndex);var k=new google.maps.Polyline(h),l=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(b=0,c=l.length;c>b;b++)e=l[b],a.hasOwnProperty(e)&&google.maps.event.addListener(k,e,i(a[e],k));return this.polylines.push(k),j.fire("polyline_added",k,this),k},j.prototype.removePolyline=function(a){for(var b=0,c=this.polylines.length;c>b;b++)if(this.polylines[b]===a)return this.polylines[b].setMap(null),this.polylines.splice(b,1),j.fire("polyline_removed",a,this),!0;return!1},j.prototype.removePolylines=function(){for(var a=0,b=this.polylines.length;b>a;a++)this.polylines[a].setMap(null);this.polylines.length=0},j.prototype.createMarker=function(b){function c(a,b,c){return function(b){b.pixel||(b.pixel=c.getProjection(),b.pixel=b.pixel&&b.pixel.fromLatLngToPoint&&b.pixel.fromLatLngToPoint(b.latLng)),a(b,this)}}if("undefined"==typeof b.lat&&"undefined"==typeof b.lng&&"undefined"===b.position)throw"No latitude or longitude defined.";var d,e,f,g=this,h=b.details,j=b.fences,k=b.outside,l={position:new google.maps.LatLng(b.lat,b.lng),map:null},m=a(l,b),n=new google.maps.Marker(m);if(n.fences=j,b.infoWindow){n.infoWindow=new google.maps.InfoWindow(b.infoWindow);var o=["closeclick","content_changed","domready","position_changed","zindex_changed"];for(d=0,e=o.length;e>d;d++)f=o[d],b.infoWindow.hasOwnProperty(f)&&google.maps.event.addListener(n.infoWindow,f,i(b.infoWindow[f],n.infoWindow))}var p=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"],q=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"];for(d=0,e=p.length;e>d;d++)f=p[d],b.hasOwnProperty(f)&&google.maps.event.addListener(n,f,i(n[f],n));for(d=0;d<q.length;d++)f=q[d],b.hasOwnProperty(f)&&google.maps.event.addListener(n,f,c(b[f],n,this.map));return google.maps.event.addListener(n,"click",function(){this.details=h,b.click&&b.click.apply(this,[this]),n.infoWindow&&(g.hideInfoWindows(),n.infoWindow.open(g.map,n))}),google.maps.event.addListener(n,"rightclick",function(a){a.marker=this,b.rightclick&&b.rightclick.apply(this,[a]),void 0!==typeof window.context_menu[g.el.id].marker&&g.buildContextMenu("marker",a)}),n.fences&&google.maps.event.addListener(n,"dragend",function(){g.checkMarkerGeofence(n,function(a,b){k(a,b)})}),n},j.prototype.addMarker=function(a){var b;if(a.hasOwnProperty("gm_accessors_"))b=a;else{if(!(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||a.position))throw"No latitude or longitude defined.";b=this.createMarker(a)}return b.setMap(this.map),this.markerClusterer&&this.markerClusterer.addMarker(b),this.markers.push(b),j.fire("marker_added",b,this),b},j.prototype.addMarkers=function(a){for(var b=0,c=a.length;c>b;b++)this.addMarker(a[b]);return this.markers},j.prototype.hideInfoWindows=function(){for(var a,b=0;a=this.markers[b];b++)a.infoWindow&&a.infoWindow.close()},j.prototype.removeMarker=function(a){for(var b=0,c=this.markers.length;c>b;b++)if(this.markers[b]===a){this.markers[b].setMap(null),this.markers.splice(b,1),this.markerClusterer&&this.markerClusterer.removeMarker(a),j.fire("marker_removed",a,this);break}return a},j.prototype.removeMarkers=function(a){var b,c,d,e,f=[];if("undefined"==typeof a)for(b=0,c=this.markers.length;c>b;b++)d=this.markers[b],d.setMap(null),this.markerClusterer&&this.markerClusterer.removeMarker(d),j.fire("marker_removed",d,this);else{for(b=0,c=a.length;c>b;b++)e=this.markers.indexOf(a[b]),e>-1&&(d=this.markers[e],d.setMap(null),this.markerClusterer&&this.markerClusterer.removeMarker(d),j.fire("marker_removed",d,this));for(b=0,c=this.markers.length;c>b;b++)d=this.markers[b],null!==d.getMap()&&f.push(d)}return this.markers=f},j.prototype.drawOverlay=function(a){var b=new google.maps.OverlayView,c=!0;return b.setMap(this.map),a.hasOwnProperty(c)&&(c=a.autoShow),b.onAdd=function(){function c(){return function(a){-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(a.cancelBubble=!0,a.returnValue=!1):a.stopPropagation()}}var d=document.createElement("div");d.style.borderStyle="none",d.style.borderWidth="0px",d.style.position="absolute",d.style.zIndex=100,d.innerHTML=a.content,b.el=d,a.layer||(a.layer="overlayLayer");var e=this.getPanes(),f=e[a.layer],g=["contextmenu","DOMMouseScroll","dblclick","mousedown"];f.appendChild(d);for(var h,j=0,k=g.length;k>j;j++)h=g[j],google.maps.event.addDomListener(d,h,c());var l=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(j=0,k=l.length;k>j;j++)if(h=l[j],a.hasOwnProperty(h)){e.overlayMouseTarget.appendChild(b.el);break}for(j=0,k=l.length;k>j;j++)h=l[j],a.hasOwnProperty(h)&&google.maps.event.addDomListener(b.el,h,i(a[h],b));google.maps.event.trigger(this,"ready")},b.draw=function(){var d=this.getProjection(),e=d.fromLatLngToDivPixel(new google.maps.LatLng(a.lat,a.lng));a.horizontalOffset=a.horizontalOffset||0,a.verticalOffset=a.verticalOffset||0;var f=b.el,g=f.children[0],h=g.clientHeight,i=g.clientWidth;switch(a.verticalAlign){case"top":f.style.top=e.y-h+a.verticalOffset+"px";break;default:case"middle":f.style.top=e.y-h/2+a.verticalOffset+"px";break;case"bottom":f.style.top=e.y+a.verticalOffset+"px"}switch(a.horizontalAlign){case"left":f.style.left=e.x-i+a.horizontalOffset+"px";break;default:case"center":f.style.left=e.x-i/2+a.horizontalOffset+"px";break;case"right":f.style.left=e.x+a.horizontalOffset+"px"}f.style.display=c?"block":"none",c||"function"!=typeof a.show||a.show.apply(this,[f])},b.onRemove=function(){var c=b.el;a.remove?a.remove.apply(this,[c]):(b.el.parentNode.removeChild(b.el),b.el=null)},this.overlays.push(b),b},j.prototype.removeOverlay=function(a){for(var b=0,c=this.overlays.length;c>b;b++)if(this.overlays[b]===a)return this.overlays[b].setMap(null),this.overlays.splice(b,1),!0;return!1},j.prototype.removeOverlays=function(){for(var a=0,b=this.overlays.length;b>a;a++)this.overlays[a].setMap(null);this.overlays.length=0},j.prototype.getFromFusionTables=function(a){var b=a.events;delete a.events;var c=a,d=new google.maps.FusionTablesLayer(c);for(var e in b)b.hasOwnProperty(e)&&google.maps.event.addListener(d,e,i(b[e],d));return this.layers.push(d),d},j.prototype.loadFromFusionTables=function(a){var b=this.getFromFusionTables(a);return b.setMap(this.map),b},j.prototype.getFromKML=function(a){var b=a.url,c=a.events,d=a,e=new google.maps.KmlLayer(b,d);for(var f in c)c.hasOwnProperty(f)&&google.maps.event.addListener(e,f,i(c[f],e));return this.layers.push(e),e},j.prototype.loadFromKML=function(a){var b=this.getFromKML(a);return b.setMap(this.map),b},j.prototype.addLayer=function(a,b){b=b||{};var c;switch(a){case"weather":this.singleLayers.weather=c=new google.maps.weather.WeatherLayer;break;case"clouds":this.singleLayers.clouds=c=new google.maps.weather.CloudLayer;break;case"traffic":this.singleLayers.traffic=c=new google.maps.TrafficLayer;break;case"transit":this.singleLayers.transit=c=new google.maps.TransitLayer;break;case"bicycling":this.singleLayers.bicycling=c=new google.maps.BicyclingLayer;break;case"panoramio":this.singleLayers.panoramio=c=new google.maps.panoramio.PanoramioLayer,c.setTag(b.filter),delete b.filter,b.click&&google.maps.event.addListener(c,"click",function(a){b.click(a),delete b.click});break;case"places":if(this.singleLayers.places=c=new google.maps.places.PlacesService(this.map),b.search||b.nearbySearch||b.radarSearch){var d={bounds:b.bounds||null,keyword:b.keyword||null,location:b.location||null,name:b.name||null,radius:b.radius||null,rankBy:b.rankBy||null,types:b.types||null};b.radarSearch&&c.radarSearch(d,b.radarSearch),b.search&&c.search(d,b.search),b.nearbySearch&&c.nearbySearch(d,b.nearbySearch)}if(b.textSearch){var e={bounds:b.bounds||null,location:b.location||null,query:b.query||null,radius:b.radius||null};c.textSearch(e,b.textSearch)}}return"undefined"!=typeof c?("function"==typeof c.setOptions&&c.setOptions(b),"function"==typeof c.setMap&&c.setMap(this.map),this.layers.push(c),c):void 0},j.prototype.removeLayer=function(a){for(var b,c="string"==typeof a&&void 0!==this.singleLayers[a],d=0,e=this.layers.length;e>d;d++)if(b=this.layers[d],this.layers[d]===a||c&&this.singleLayers[a]===b)return b.setMap(null),c&&delete this.singleLayers[a],this.layers.splice(d,1),!0;return!1},j.prototype.removeLayers=function(){for(var a=0,b=this.layers.length;b>a;a++)this.layers[a].setMap(null);for(a in this.singleLayers)this.singleLayers.hasOwnProperty(a)&&delete this.singleLayers[a];this.layers.length=0},j.prototype.getRoutes=function(b){var c,d;switch(b.travelMode){case"bicycling":c=google.maps.TravelMode.BICYCLING;break;case"transit":c=google.maps.TravelMode.TRANSIT;break;case"driving":c=google.maps.TravelMode.DRIVING;break;default:c=google.maps.TravelMode.WALKING}d="imperial"===b.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var e={avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},f=a(e,b);f.origin=/string/.test(typeof b.origin)?b.origin:new google.maps.LatLng(b.origin[0],b.origin[1]),f.destination=/string/.test(typeof b.destination)?b.destination:new google.maps.LatLng(b.destination[0],b.destination[1]),f.travelMode=c,f.unitSystem=d,delete f.callback,delete f.error;var g=this,h=new google.maps.DirectionsService;h.route(f,function(a,c){if(c===google.maps.DirectionsStatus.OK){for(var d in a.routes)a.routes.hasOwnProperty(d)&&g.routes.push(a.routes[d]);b.callback&&b.callback(g.routes)}else b.error&&b.error(a,c)})},j.prototype.removeRoutes=function(){this.routes=[]},j.prototype.getElevations=function(d){d=a({locations:[],path:!1,samples:256},d),d.locations.length>0&&d.locations[0].length>0&&(d.locations=c(b([d.locations],e,!1)));var f=d.callback;delete d.callback;var g=new google.maps.ElevationService;if(d.path){var h={path:d.locations,samples:d.samples};g.getElevationAlongPath(h,function(a,b){f&&"function"==typeof f&&f(a,b)})}else delete d.path,delete d.samples,g.getElevationForLocations(d,function(a,b){f&&"function"==typeof f&&f(a,b)})},j.prototype.cleanRoute=j.prototype.removePolylines,j.prototype.drawRoute=function(a){var b=this;this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,error:a.error,callback:function(c){if(c.length>0){var d={path:c[c.length-1].overview_path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};a.hasOwnProperty("icons")&&(d.icons=a.icons),b.drawPolyline(d),a.callback&&a.callback(c[c.length-1])}}})},j.prototype.travelRoute=function(a){var b,c,d,e,f;if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,error:a.error,callback:function(g){if(g.length>0&&a.start&&a.start(g[g.length-1]),g.length>0&&a.step&&(b=g[g.length-1],b.legs.length>0))for(c=b.legs[0].steps,e=0,f=c.length;f>e;e++)d=c[e],d.step_number=e,a.step(d,b.legs[0].steps.length-1);g.length>0&&a.end&&a.end(g[g.length-1])}});else if(a.route&&a.route.legs.length>0)for(c=a.route.legs[0].steps,e=0,f=c.length;f>e;e++)d=c[e],d.step_number=e,a.step(d)},j.prototype.drawSteppedRoute=function(a){var b,c,d,e,f,g,h=this;if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,error:a.error,callback:function(i){if(i.length>0&&a.start&&a.start(i[i.length-1]),i.length>0&&a.step&&(b=i[i.length-1],b.legs.length>0))for(c=b.legs[0].steps,e=0,f=c.length;f>e;e++)d=c[e],d.step_number=e,g={path:d.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight},a.hasOwnProperty("icons")&&(g.icons=a.icons),h.drawPolyline(g),a.step(d,b.legs[0].steps.length-1);i.length>0&&a.end&&a.end(i[i.length-1])}});else if(a.route&&a.route.legs.length>0)for(c=a.route.legs[0].steps,e=0,f=c.length;f>e;e++)d=c[e],d.step_number=e,g={path:d.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight},a.hasOwnProperty("icons")&&(g.icons=a.icons),h.drawPolyline(g),a.step(d)},j.Route=function(a){this.origin=a.origin,this.destination=a.destination,this.waypoints=a.waypoints,this.map=a.map,this.route=a.route,this.step_count=0,this.steps=this.route.legs[0].steps,this.steps_length=this.steps.length;var b={path:new google.maps.MVCArray,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};a.hasOwnProperty("icons")&&(b.icons=a.icons),this.polyline=this.map.drawPolyline(b).getPath()},j.Route.prototype.getRoute=function(a){var b=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:a.travelMode,waypoints:this.waypoints||[],error:a.error,callback:function(c){b.route=c&&c[0],a.callback&&a.callback.call(b)}})},j.Route.prototype.back=function(){if(this.step_count>0){this.step_count--;var a=this.route.legs[0].steps[this.step_count].path;for(var b in a)a.hasOwnProperty(b)&&this.polyline.pop()}},j.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var a=this.route.legs[0].steps[this.step_count].path;for(var b in a)a.hasOwnProperty(b)&&this.polyline.push(a[b]);this.step_count++}},j.prototype.checkGeofence=function(a,b,c){return c.containsLatLng(new google.maps.LatLng(a,b))},j.prototype.checkMarkerGeofence=function(a,b){var c,d;if(a.fences)for(var e=0,f=a.fences.length;f>e;e++)c=a.fences[e],d=a.getPosition(),this.checkGeofence(d.lat(),d.lng(),c)||b(a,c)},j.prototype.toImage=function(a){var b={};if(a||(a={}),a.size?b.size=a.size:b.size=[this.el.clientWidth,this.el.clientHeight],b.lat=this.getCenter().lat(),b.lng=this.getCenter().lng(),this.markers.length>0){b.markers=[];for(var c=0,d=this.markers.length;d>c;c++)b.markers.push({lat:this.markers[c].getPosition().lat(),lng:this.markers[c].getPosition().lng()})}if(this.polylines.length>0){var e=this.polylines[0];b.polyline={},b.polyline.path=google.maps.geometry.encoding.encodePath(e.getPath()),b.polyline.strokeColor=e.strokeColor,b.polyline.strokeOpacity=e.strokeOpacity,b.polyline.strokeWeight=e.strokeWeight}return j.staticMapURL(b)},j.staticMapURL=function(a){function b(a,b){if("#"===a[0]&&(a=a.replace("#","0x"),b)){if(b=parseFloat(b),b=Math.min(1,Math.max(b,0)),0===b)return"0x00000000";b=(255*b).toString(16),1===b.length&&(b+=b),a=a.slice(0,8)+b}return a}var c,d=[],e=("file:"===location.protocol?"http:":location.protocol)+"//maps.googleapis.com/maps/api/staticmap";a.url&&(e=a.url,delete a.url),e+="?";var f=a.markers;delete a.markers,!f&&a.marker&&(f=[a.marker],delete a.marker);var g=a.styles;delete a.styles;var h=a.polyline;if(delete a.polyline,a.center)d.push("center="+a.center),delete a.center;else if(a.address)d.push("center="+a.address),delete a.address;else if(a.lat)d.push(["center=",a.lat,",",a.lng].join("")),delete a.lat,delete a.lng;else if(a.visible){var i=encodeURI(a.visible.join("|"));d.push("visible="+i)}var j=a.size;j?(j.join&&(j=j.join("x")),delete a.size):j="630x300",d.push("size="+j),a.zoom||a.zoom===!1||(a.zoom=15);var k=a.hasOwnProperty("sensor")?!!a.sensor:!0;delete a.sensor,d.push("sensor="+k);for(var l in a)a.hasOwnProperty(l)&&d.push(l+"="+a[l]);var m,n,o,p;if(f)for(o=0,p=f.length;p>o;o++){c=f[o],m=[],c.size&&"normal"!==c.size?(m.push("size:"+c.size),delete c.size):c.icon&&(m.push("icon:"+encodeURI(c.icon)),delete c.icon),c.color&&(m.push("color:"+c.color.replace("#","0x")),delete c.color),c.label&&(m.push("label:"+c.label[0].toUpperCase()),delete c.label),n=c.address?c.address:c.lat+","+c.lng,delete c.address,delete c.lat,delete c.lng;for(l in c)c.hasOwnProperty(l)&&m.push(l+":"+c[l]);m.length||0===o?(m.push(n),m=m.join("|"),d.push("markers="+encodeURI(m))):(m=d.pop()+encodeURI("|"+n),d.push(m))}var q,r,s,t,u,v;if(g)for(o=0,p=g.length;p>o;o++){for(q=[],g[o].featureType&&q.push("feature:"+g[o].featureType.toLowerCase()),g[o].elementType&&q.push("element:"+g[o].elementType.toLowerCase()),r=0,s=g[o].stylers.length;p>r;r++)for(t in g[o].stylers[r])g[o].stylers[r].hasOwnProperty(t)&&(u=g[o].stylers[r][t],("hue"===t||"color"===t)&&(u="0x"+u.substring(1)),q.push(t+":"+u));v=q.join("|"),""!==v&&d.push("style="+v)}if(h){if(c=h,h=[],c.strokeWeight&&h.push("weight:"+parseInt(c.strokeWeight,10)),c.strokeColor){var w=b(c.strokeColor,c.strokeOpacity);h.push("color:"+w)}if(c.fillColor){var x=b(c.fillColor,c.fillOpacity);h.push("fillcolor:"+x)}var y,z,A=c.path;if(A.join)for(r=0,z=A.length;z>r;r++)y=A[r],h.push(y.join(","));else h.push("enc:"+A);h=h.join("|"),d.push("path="+encodeURI(h))}var B=window.devicePixelRatio||1;return d.push("scale="+B),d=d.join("&"),e+d},j.prototype.addMapType=function(a,b){if(!b.hasOwnProperty("getTileUrl")||"function"!=typeof b.getTileUrl)throw'"getTileUrl" function required.';b.tileSize=b.tileSize||new google.maps.Size(256,256);var c=new google.maps.ImageMapType(b);this.map.mapTypes.set(a,c)},j.prototype.addOverlayMapType=function(a){if(!a.hasOwnProperty("getTile")||"function"!=typeof a.getTile)throw'"getTile" function required.';var b=a.index;delete a.index,this.map.overlayMapTypes.insertAt(b,a)},j.prototype.removeOverlayMapType=function(a){this.map.overlayMapTypes.removeAt(a)},j.prototype.addStyle=function(a){var b=new google.maps.StyledMapType(a.styles,{name:a.styledMapName});this.map.mapTypes.set(a.mapTypeId,b)},j.prototype.setStyle=function(a){this.map.setMapTypeId(a)},j.prototype.createPanorama=function(a){return a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||(a.lat=this.getCenter().lat(),a.lng=this.getCenter().lng()),this.panorama=j.createPanorama(a),this.map.setStreetView(this.panorama),this.panorama},j.createPanorama=function(b){var c=g(b.el,b.context);b.position=new google.maps.LatLng(b.lat,b.lng),delete b.el,delete b.context,delete b.lat,delete b.lng;for(var d=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"],e=a({visible:!0},b),f=0,h=d.length;h>f;f++)delete e[d[f]];var j,k=new google.maps.StreetViewPanorama(c,e);for(f=0,h=d.length;h>f;f++)j=d[f],b.hasOwnProperty(j)&&google.maps.event.addListener(k,j,i(b[j],k));return k},j.prototype.on=function(a,b){return j.on(a,this,b)},j.prototype.off=function(a){j.off(a,this)},j.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"],j.on=function(a,b,c){if(-1===j.custom_events.indexOf(a))return b instanceof j&&(b=b.map),google.maps.event.addListener(b,a,c);var d={handler:c,eventName:a};return b.registered_events[a]=b.registered_events[a]||[],b.registered_events[a].push(d),d},j.off=function(a,b){-1===j.custom_events.indexOf(a)?(b instanceof j&&(b=b.map),google.maps.event.clearListeners(b,a)):b.registered_events[a]=[]},j.fire=function(a,b,c){var d;if(-1===j.custom_events.indexOf(a))google.maps.event.trigger(b,a,Array.prototype.slice.apply(arguments).slice(2));else if(c.registered_events&&c.registered_events.hasOwnProperty(a)){d=c.registered_events[a];for(var e=0,f=d.length;f>e;e++)d[e].handler.apply(c,[b])}},j.geolocate=function(a){var b=a.always||a.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(c){a.success(c),b&&b()},function(c){a.error(c),b&&b()},a.options):(a.not_supported(),b&&b())},j.geocode=function(a){this.geocoder=new google.maps.Geocoder;var b=a.callback;a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")&&(a.latLng=new google.maps.LatLng(a.lat,a.lng)),delete a.lat,delete a.lng,delete a.callback,this.geocoder.geocode(a,function(a,c){b(a,c)})},google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(){for(var a,b=new google.maps.LatLngBounds,c=this.getPaths(),d=0;d<c.getLength();d++){a=c.getAt(d);for(var e=0;e<a.getLength();e++)b.extend(a.getAt(e))}return b}),google.maps.Polygon.prototype.containsLatLng||(google.maps.Polygon.prototype.containsLatLng=function(a){var b=this.getBounds();if(null!==b&&!b.contains(a))return!1;for(var c=!1,d=this.getPaths().getLength(),e=0;d>e;e++)for(var f=this.getPaths().getAt(e),g=f.getLength(),h=g-1,i=0;g>i;i++){var j=f.getAt(i),k=f.getAt(h);(j.lng()<a.lng()&&k.lng()>=a.lng()||k.lng()<a.lng()&&j.lng()>=a.lng())&&j.lat()+(a.lng()-j.lng())/(k.lng()-j.lng())*(k.lat()-j.lat())<a.lat()&&(c=!c),h=i}return c}),google.maps.Circle.prototype.containsLatLng||(google.maps.Circle.prototype.containsLatLng=function(a){return google.maps.geometry?google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(),a)<=this.getRadius():!0}),google.maps.LatLngBounds.prototype.containsLatLng=function(a){return this.contains(a)},google.maps.Marker.prototype.setFences=function(a){this.fences=a},google.maps.Marker.prototype.addFence=function(a){this.fences.push(a)},google.maps.Marker.prototype.getId=function(){return this.__gm_id},Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;
return-1}),j});
//# sourceMappingURL=gmaps.min.js.map